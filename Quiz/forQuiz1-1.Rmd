---
title: "Quiz1대비(1)"
author: "김재현"
date: "`r Sys.Date()`"
output: html_document
---

## R관련 2,3,4장, R4강

### sort vs rank vs order

```{r}
x= c(10, 15, 8, 22)
sort(x)
```

sort = 벡터 내 원소를 오름차순 정리

```{r}
rank(x)
```
rank = sort했을 경우 벡터 내 원소가 몇번째에 있을지 알려준다. 

```{r}
order(x)
```
order = sort한 상태의 벡터내 원소가 원래 몇번째였는지 알려준다.

*문제*
```{r}
order(c(12,5,9,20))
```

*문제*
```{r}
1:5 + 1:2
```

**위와 같이 길이가 맞지 않은 벡터를 계산할 때 recycle rule이 적용된다.**


rev = 순서를 반대로 바꾼다.

```{r}
rev(sort(c(2,7,3)))
```
```{r}
rev(c(2,7,3))
```


---

### Inf, NaN
R은 double precison 사용하여 Infinity까지 표현해준다.  
NaN Not a Number가 나오는 상황만 유의하자.

```{r}
3/0
exp(-Inf)
(0:3)^Inf
Inf-Inf
Inf/Inf
```

*문제*

```{r}
0/0
```

---

*문제*

고객명단 %>% group_by（거주지역） %>% summarize（지역평균=mean（소득금액）） 

위 식은 어떤 의미인가?

답: 고객명단 데이터프레임에 있는 변수 중 거주지역 값 별로 소득금액의 평균값을 계산하여 지역평균 변수에 저장하라는의미 

%>% 는 chain operator, pipe operator 이고, dplyr 패키지 사용시에 쓸 수 있다.

*예시*
```{r}
worms = read.table('worms.txt', header = T)
head(worms)
```
```{r}
library(dplyr)
```
```{r}
worms %>% group_by(Vegetation) %>% summarize(AreaM = mean(Area), SlopeM = mean(Slope)) 
```

worms 데이터베이스 내 데이터를 Vegetation 변수의 값으로 나눠서 Area의 평균값을 AreaM, Slope의 평균값을 SlopeM 변수에 저장한다.

---

### coplot

```{r}
Ozone = read.table('ozone.txt', header = T)
head(Ozone)
```

```{r}
coplot(ozone~wind|temp, Ozone, panel = panel.smooth)
# figure margin too large는 Rstudio창 폭이 너무 작아서 생길 수 있음
```
temp를 6구간으로 나눠서 각 temp 하에 wind와 ozone의 관계를 plot해준다. ozone이 종속변수, wind가 독립변수.

---

### qunatmod 패키지 getSymbols 함수
quantmod 패키지는 quantitative trader 즉, 퀀트(Quant)가 개발, 테스팅하는 과정을 보조하기 위해 만들어진 패키지다.  
getSymbols함수는 야후 파이낸스에서 시세를 받아온다.

---

### length 활용

*문제*
1000개의 0에서 1사이 uniform random number를 생성하고 0.3보다 큰값의 비율을 계산하는 R코드를 작성하시오. 

```{r}
x = runif(1000)
length(x[x > 0.3])/1000
```

### quantile, ecdf 비교

```{r}
df1 = iris$Sepal.Length
head(df1)
```

```{r}
Fn = ecdf(x = df1)
Fn(5)
```
```{r}
quantile(x = df1,probs = 0.2133333)
```

qunatile과 ecdf는 역함수 관계

---

### 조합 combination

n개의 원소를 갖는 집합에서 r개를 순서에 관계없이 뽑는 경우의수
*순열 permutaion은 순서를 생각하고 뽑는 경우의 수*

*문제*
5C2의 값은?
```{r}
choose(n = 5, k = 2)
```
```{r}
(5*4)/(2*1)
```

5C2 , 5개중 2개를 순서에 관계없이 뽑는 경우의 수를 보여주는 함수도 있다.
```{r}
combn(5,2)
```

---

### 연산자 순서

**%% 와 %/%**
```{r}
5 %% 2
```
```{r}
5 %/% 2
```

*예시*
```{r}
2 * 5 %% 3 == 4
```
comment : * 보다 %% 가 우선

```{r}
2 * 3 ^ 4 %% 4 == 2 
```
comment : %% 보다 ^ 이 우선
```{r}
2 ^ 4 / 8 %/% 2 == 4
```
^ -> %%, %/% -> *, / -> + , -

---

### runif 함수

uniform distribution (균등분포)를 이루는 랜덤값을 만들 수 있다.

```{r}
#make this example reproducible
set.seed(5)

#generate 10 random values from uniform distribution
runif(n=10, min=50, max=100)
```

출처 : https://www.statology.org/runif-in-r/

*min, max를 생략하면?*
```{r}
runif(10)
```
0과 1 사이에서 random variable 생성

---

### for 함수

for 함수는 반복, loop에 사용한다. 

```{r}
for (i in 1:10) {
  print(i)
}
```

```{r}
j <- k <- 0
for (i in 1:3) {j <- i-5; k <- k + i*j; print(i+j+k) }
```
1번 print == j = -4, k = -4 , i = 1
현재 j와 k에는 -4 가 입력된 상태
2번 print == j = -3, k = -4 + -6 = -10 , i = 2
현재 j와 k에는 -3, -10이 입력된 상태
3번 print == j = -2, k = -10 + -6 = -16 , i = 3

---

### 인덱싱

인덱싱할 때 comma를 생략하면?

*데이터준비*
```{r}
titles <- c('Probability', 'Finance', 'Simulation')
authors <- c('Breiman', 'Lehmann', 'Givens')
years <- c(1968, 1983, 2005)
books <- data.frame(title=titles, author=authors, year=years)
head(books)
```

*문제*
books[1:2] 와 books[1:2, ] 의 차이는?

```{r}
books[1:2]
```
**인덱싱할 때 comma를 생략하면 열을 선택한다.**

```{r}
books[2:3]
```
```{r}
books[1:2, ]
```

*!=*

```{r}
x <- 10:15; 
x
```
```{r}
x[x != 12]
```

!= 으로 원소를 제외하고 고를 수 있다.

```{r}
x[x != 10]
```

---

### 상관계수 cor

두 변수간의 상관계수를 알고 싶은 경우 사용한다. default method는 pearson이다.

```{r}
x = c(1:10)
y = c(2:11)
plot(x,y)
```
```{r}
cor(x,y)
```

### end of document
